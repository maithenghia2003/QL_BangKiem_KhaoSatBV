@model QL_BangKiem_KhaoSat.Models.XacDinhNguoiBenh

<h1>BẢNG KIỂM XÁC ĐỊNH CHÍNH XÁC NGƯỜI BỆNH CUNG CẤP DỊCH VỤ</h1>

<div>
    <strong>Thời điểm đánh giá:</strong>
    <div class="row">
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_TiepNhan" /> 1.1 Tiếp nhận NB đăng ký khám bệnh
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_TuVan" /> 1.2 Tư vấn
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_ThanhToan" /> 2.1 Thanh toán viện phí
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_ThuPhiCLS" /> 2.2 Thu phí cận lâm sàng
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_CapPhatThuoc" /> 3.1 Cấp phát thuốc
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_CapPhatToaThuoc" /> 3.2 Cấp phát toa thuốc
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_CapPhieuHen" /> 3.3 Cấp phiếu hẹn
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_ThucHienCLS" /> 4.1 Thực hiện cận lâm sàng
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_CapPhatChiDinhCLS" /> 4.2 Cấp phát chỉ định cận lâm sàng
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_TraKetQuaCLS" /> 4.3 Trả kết quả CLS
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_ThucHienKyThuat" /> 5.1 Thực hiện kỹ thuật
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_ThucHienThuThuat" /> 5.2 Thực hiện thủ thuật
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_ThucHienPhauThuat" /> 5.3 Thực hiện phẫu thuật
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_ThucHienCLSKhac" /> 5.4 Thực hiện CLS
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_NhapVien" /> 6.1 Nhập viện
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_ChuyenKhoa" /> 6.2 Chuyển khoa
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_ChuyenVien" /> 6.3 Chuyển viện
        </div>
        <div class="col-md-4">
            <input type="checkbox" asp-for="ThoiDiemDanhGia_XuatVien" /> 6.4 Xuất viện
        </div>
    </div>
</div>
<br />

@using (Html.BeginForm("LuuKetQua", "XacDinhNguoiBenh", FormMethod.Post))
{
    <table class="table table-bordered">
        @* Thêm class table-bordered cho đẹp *@
        <thead>
            <tr>
                <th rowspan="2" style="vertical-align: middle;">STT</th>
                <th rowspan="2" style="vertical-align: middle;">NỘI DUNG ĐÁNH GIÁ</th>
                <th colspan="3" class="text-center">NVYT Thực hiện</th>
                <th colspan="3" class="text-center">NVYT Thực hiện</th>
            </tr>
            <tr>
                <th class="text-center">Thực hiện đầy đủ (1đ)</th>
                <th class="text-center">Thực hiện chưa đạt (0.5đ)</th>
                <th class="text-center">Không thực hiện (0đ)</th>
                <th class="text-center">Thực hiện đầy đủ (1đ)</th>
                <th class="text-center">Thực hiện chưa đạt (0.5đ)</th>
                <th class="text-center">Không thực hiện (0đ)</th>
            </tr>
            <tr>
                <th colspan="2" class="text-right">Tên NVYT:</th>
                <th colspan="3"><input type="text" asp-for="TenNVYT1" class="form-control" placeholder="Ghi tên NVYT 1" /></th>
                <th colspan="3"><input type="text" asp-for="TenNVYT2" class="form-control" placeholder="Ghi tên NVYT 2" /></th>
            </tr>
        </thead>
        <tbody>
            @for (var i = 0; i < Model.CacYeuTo.Count; i++)
            {
                <tr>
                    <td>@Model.CacYeuTo[i].STT</td>
                    <td>@Model.CacYeuTo[i].NoiDung</td>
                    <td class="text-center"><input type="radio" name="CacYeuTo[@i].KetQuaNVYT1" value="Dat" asp-for="CacYeuTo[i].KetQuaNVYT1" /></td>
                    <td class="text-center"><input type="radio" name="CacYeuTo[@i].KetQuaNVYT1" value="ChuaDat" asp-for="CacYeuTo[i].KetQuaNVYT1" /></td>
                    <td class="text-center"><input type="radio" name="CacYeuTo[@i].KetQuaNVYT1" value="KhongDat" asp-for="CacYeuTo[i].KetQuaNVYT1" /></td>
                    <td class="text-center"><input type="radio" name="CacYeuTo[@i].KetQuaNVYT2" value="Dat" asp-for="CacYeuTo[i].KetQuaNVYT2" /></td>
                    <td class="text-center"><input type="radio" name="CacYeuTo[@i].KetQuaNVYT2" value="ChuaDat" asp-for="CacYeuTo[i].KetQuaNVYT2" /></td>
                    <td class="text-center"><input type="radio" name="CacYeuTo[@i].KetQuaNVYT2" value="KhongDat" asp-for="CacYeuTo[i].KetQuaNVYT2" /></td>
                </tr>
            }
        </tbody>
        <tfoot>
            <tr>
                <td colspan="2" class="text-right">Kết luận bảng kiểm</td>
                <td colspan="3" class="text-center">
                    <input type="radio" asp-for="KetLuanNVYT1" value="Dat" /> Đạt
                    <input type="radio" asp-for="KetLuanNVYT1" value="ChuaDat" /> Chưa đạt
                    <input type="radio" asp-for="KetLuanNVYT1" value="KhongDat" /> Không đạt
                </td>
                <td colspan="3" class="text-center">
                    <input type="radio" asp-for="KetLuanNVYT2" value="Dat" /> Đạt
                    <input type="radio" asp-for="KetLuanNVYT2" value="ChuaDat" /> Chưa đạt
                    <input type="radio" asp-for="KetLuanNVYT2" value="KhongDat" /> Không đạt
                </td>
            </tr>
        </tfoot>
    </table>

    <br />

    <div>
        <strong>Lưu ý:</strong>
        <ul>
            <li>
                Một số ghi chú:
                <ul>
                    <li>NVYT sử dụng câu hỏi mở (với thông tin: họ tên, năm sinh/ tuổi, địa chỉ) và kiểm tra tra lại sau khi NB/ thân nhân trả lời;</li>
                    <li>Yếu tố giới tính không áp dụng tại: Phòng khám tuyến vú, phụ khoa; Khoa Ngoại tuyến vú, Ngoại phụ khoa, Xạ trị phụ khoa;</li>
                    <li>Yếu tố địa chỉ: Phải đầy đủ 3 cấp thông tin cư trú (xã/phường/thị trấn, quận/huyện/thành phố/tỉnh);</li>
                </ul>
            </li>
            <li>
                Sau khi đánh giá chỉ tiết từng yếu tố đánh kèm của mục 1 (đúng người bệnh) → tiến hành kết luận nội dung “đúng người bệnh” như sau:
                <ol>
                    <li>“Đạt”: khi ít nhất 3 yếu tố được đánh giá ở cột “thực hiện đầy đủ - 1đ”;</li>
                    <li>“Chưa đạt”: khi đánh giá ít hơn 3 yếu tố; hoặc khi đánh giá từ 3 yếu tố trở lên nhưng chỉ có 2 yếu tố ở cột “thực hiện đầy đủ - 1đ”;</li>
                    <li>“Không đạt”: khi tiếp xúc người bệnh mà không xác nhận lại thông tin của người bệnh;</li>
                </ol>
            </li>
            <li>Các nội dung còn lại đánh giá theo thang điểm có sẵn</li>
        </ul>
    </div>

    <button type="submit" class="btn btn-primary">Lưu Kết Quả</button>
}

